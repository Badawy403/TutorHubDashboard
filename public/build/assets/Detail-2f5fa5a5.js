import{A as k,N as E}from"./AppLayout-4ad18c55.js";import{P as N}from"./PageHeader-7b6923cd.js";import{d as p,H as S,L as C,_ as b,o as a,b as i,a as s,F as L,h as I,t,f as m,g as n,s as B,v as M,U as T,p as q,i as H,u as P,e as c,N as V,w as R,r as l,c as w}from"./app-532c599c.js";import{V as A}from"./ValidationErrors-b71c5ecd.js";import{B as F}from"./Breadcrums-8b420da4.js";import{M as D}from"./Modal-ab73aec4.js";const K=p({components:{Head:S,ValidationErrors:A,Link:C},props:["service"],data(){return{fetching:!1,messages:[],message:"",attachment_file:"",attachment_file_url:"",disable:!1,showStartedButton:!0}},async created(){Echo.private(`chat-message-service.${this.service.id}`).listen(".chat-message",e=>{this.messages.push(e.message),this.$nextTick(()=>{this.scrollToEnd()})}),await this.getChatMessages()},methods:{getChatMessages(){this.fetching=!0,axios.get(this.route("getApiChatMessages",{service_id:this.service.id})).then(e=>{this.messages=e.data.data,this.fetching=!1,this.$nextTick(()=>{this.scrollToEnd()})})},sendMessage(){if(this.disable=!0,!this.message&&!this.attachment_file){this.$toast.error("Please type message or attach a file"),this.disable=!1;return}const e={"Content-Type":"multipart/form-data"};let o=new FormData;o.append("service_id",this.service.id),o.append("message",this.message),o.append("attachment_file",this.attachment_file),axios.post(this.route("postApiSendMessage"),o,{headers:e}).then(f=>{f.data.success&&(this.disable=!1,this.message="",this.attachment_file="",this.attachment_file_url="")})},processAttachmentFile(e){this.attachment_file=e.target.files[0],this.attachment_file_url=URL.createObjectURL(e.target.files[0])},scrollToEnd(){const e=this.$refs.chatContainer;e.scrollTop=e.scrollHeight},updateServiceIsStarted(){this.$page.props.auth.logged_in_as=="teacher"&&axios.post(this.route("service_detail.updateStarted",{service_id:this.service.id})).then(e=>{e.data.success&&(this.$emit("showCompletedButton"),this.showStartedButton=!1)}),this.$page.props.auth.logged_in_as=="academy"&&axios.post(this.route("academy.service_detail.updateStarted",{service_id:this.service.id})).then(e=>{e.data.success&&(this.$emit("showCompletedButton"),this.showStartedButton=!1)})}}}),j=e=>(q("data-v-1ea332fd"),e=e(),H(),e),O={key:0,class:"chat-ui"},G=P('<ul class="m-b-0 px-3 skeleton-structure" type="none" id="style-2" data-v-1ea332fd><div data-v-1ea332fd><div data-v-1ea332fd><li class="clearfix" data-v-1ea332fd><div class="d-flex flex-row justify-content-end my-4" data-v-1ea332fd><div class="float-right msg-bubble" style="width:60%;height:54px;" data-v-1ea332fd></div></div></li><li class="clearfix" data-v-1ea332fd><div class="d-flex flex-row justify-content-end my-4" data-v-1ea332fd><div class="float-right msg-bubble" style="width:40%;height:54px;" data-v-1ea332fd></div></div></li><li class="clearfix" data-v-1ea332fd><div class="d-flex my-4" data-v-1ea332fd><div class="msg-bubble" style="width:80%;height:54px;" data-v-1ea332fd></div></div></li><li class="clearfix" data-v-1ea332fd><div class="d-flex flex-row justify-content-end my-4" data-v-1ea332fd><div class="float-right msg-bubble" style="width:50%;height:54px;" data-v-1ea332fd></div></div></li><li class="clearfix" data-v-1ea332fd><div class="d-flex my-4" data-v-1ea332fd><div class="msg-bubble" style="width:70%;height:54px;" data-v-1ea332fd></div></div></li><li class="clearfix" data-v-1ea332fd><div class="d-flex my-4" data-v-1ea332fd><div class="msg-bubble" style="width:30%;height:54px;" data-v-1ea332fd></div></div></li></div></div></ul>',1),J=[G],Q={key:1},W={class:"chat-ui"},X={class:"m-b-0 px-3",type:"none",id:"style-2",style:{height:"500px",overflow:"auto"},ref:"chatContainer"},Y={key:0,class:"clearfix"},Z={class:"d-flex flex-row justify-content-end my-4"},x={class:"float-right msg-bubble"},ee=j(()=>s("br",null,null,-1)),se={key:0},te=["src"],oe={key:1,class:"clearfix"},ae={class:"d-flex my-4"},ie={class:"msg-bubble"},ne=j(()=>s("br",null,null,-1)),de={key:0},re=["src"],ce={class:"d-flex align-items-center form-control"},le={class:"upload-btn-wrapper align-items-center"},_e=j(()=>s("input",{type:"hidden",name:"icon",class:"image",value:""},null,-1)),me=["placeholder","disabled"],ue=["disabled"],he=j(()=>s("i",{class:"bi bi-send"},null,-1)),fe=[he],ve={key:0,class:"d-flex align-items-end mt-3"},pe={class:"border border-3 border-primary me-2"},be=["src"],ge={key:0};function ye(e,o,f,g,y,$){return e.fetching?(a(),i("div",O,J)):(a(),i("div",Q,[s("div",W,[s("ul",X,[(a(!0),i(L,null,I(e.messages,d=>(a(),i("div",{key:d.id},[s("div",null,[d.sender_type==e.$page.props.auth.logged_in_as&&e.$page.props.auth.user[e.$page.props.auth.logged_in_as].id==d.sender_id?(a(),i("li",Y,[s("div",Z,[s("div",x,[s("span",null,t(d.message),1),m(),ee,d.is_attachment?(a(),i("span",se,[s("img",{src:d.attachment_url,height:"100",alt:""},null,8,te)])):n("",!0)])])])):(a(),i("li",oe,[s("div",ae,[s("div",ie,[s("span",null,t(d.message),1),m(),ne,d.is_attachment?(a(),i("span",de,[s("img",{src:d.attachment_url,height:"100",alt:""},null,8,re)])):n("",!0)])])]))])]))),128))],512),s("div",ce,[s("div",le,[_e,s("input",{type:"file",id:"attachment",ref:"attachment",onChange:o[0]||(o[0]=d=>e.processAttachmentFile(d)),class:"custom-file-input w-100","aria-describedby":"IconError","aria-invalid":"true"},null,544)]),B(s("input",{placeholder:e.__("enter here"),type:"text",class:"w-100 ps-3 border-0",onKeyup:o[1]||(o[1]=T((...d)=>e.sendMessage&&e.sendMessage(...d),["enter"])),disabled:e.disable,"onUpdate:modelValue":o[2]||(o[2]=d=>e.message=d)},null,40,me),[[M,e.message]]),s("button",{type:"button",class:"btn btn-primary me-2",onClick:o[3]||(o[3]=(...d)=>e.sendMessage&&e.sendMessage(...d)),disabled:e.disable},fe,8,ue)]),e.attachment_file_url?(a(),i("div",ve,[s("div",pe,[s("img",{src:e.attachment_file_url,width:"100",height:"100",alt:""},null,8,be)]),e.attachment_file.name?(a(),i("span",ge,t(e.attachment_file.name),1)):n("",!0)])):n("",!0)])]))}const U=b(K,[["render",ye],["__scopeId","data-v-1ea332fd"]]),$e=p({components:{Head:S,AppLayout:k,ChatComponent:U,ValidationErrors:A,Link:C,Breadcrums:F,Modal:D},props:["service"],computed:{userRating(){var e=this.service.reviews&&this.service.reviews.find(o=>o.teacher_id==this.$page.props.auth.user[this.$page.props.auth.logged_in_as].id);return e}},data(){return{serviceStatusForm:this.$inertia.form({service_id:this.service.id,status_code:""}),form:this.$inertia.form({comment:"",rating:0,teacher_id:this.service.teacher_id,booked_service_id:this.service.id}),showMarkedAsCompletedButton:!1,breadcrums:[{id:1,name:this.__("home"),link:"/"},{id:2,name:"My Services",link:"/service_log"},{id:3,name:"Service Detail",link:""}]}},async created(){this.showMarkedAsCompletedButton=!0},methods:{getBadgeBackgroundColor(e){switch(e){case"Pending":return"#ffc107";case"Accepted":return"#28a745";case"Rejected":return"#dc3545";case"Cancelled":return"#6c757d";case"Completed":return"#007bff";default:return""}},close(){document.getElementById("close").click()},resetForm(){this.form=this.$inertia.form({comment:"",rating:0})},setRating(e){this.form.rating=e},updateServiceStatus(e){this.serviceStatusForm.status_code=e,this.serviceStatusForm.transform(o=>({...o})).post(this.route("service_detail.updateStatus"),{onSuccess:()=>{e==5&&document.getElementById("rate_now_button").click()}})},submit(){this.form.post(this.route("add_service_rating"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{const e=document.querySelector(".modal-backdrop");e&&e.classList.remove("modal-backdrop"),this.resetForm()}})}}}),we={class:"container-fluid py-5"},ke={class:"row"},Se={class:"col-12"},Ce={class:"fs-2 text-center"},Be={class:"fw-normal"},Me={class:"fw-bold"},Re={class:"section py-5"},Ae={class:"container"},je={class:"px-4 bg-warning rounded-4 mb-3 mb-0 rounded py-3"},Ve={key:0,class:"row align-items-center"},Fe={class:"col-md-6"},Ue={class:"mb-0"},Le={class:"col-md-6 d-flex justify-content-end flex-wrap"},De={key:1,class:"row"},ze={class:"col-md-6"},Ee={class:"mb-0"},Ne={key:2},Ie={key:3,class:"row justify-content-end"},Te={class:"col-md-6 d-flex justify-content-end flex-wrap"},qe={key:0,class:"mt-4"},He={class:"mb-0 rounded",style:{"background-color":"#fff3db"}},Pe={key:0},Ke={class:"col-md-4 d-flex"},Oe={class:"d-flex align-items-center mb-3"},Ge={class:"mb-0 text-capitalize"},Je={class:"row"},Qe=s("div",{class:"col-md-7"},null,-1),We={class:"col-lg-5"},Xe={class:"card px-2 pb-4 d-flex flex-column mt-3 mt-md-0"},Ye={class:"card-body"},Ze={class:"d-flex border-bottom border-info py-3 align-items-center justify-content-between"},xe={class:"text-primary fw-bolder fs-4"},es={class:"d-flex border-bottom border-info py-3 flex-column align-content-start"},ss={class:"fs-5 mb-2 fw-bolder text-secondary"},ts={class:"fs-5 text-secondary"},os={key:0,class:"d-flex flex-column border-bottom border-info py-3 align-content-start"},as={class:"fs-5 text-secondary mb-2 fw-bolder"},is={class:"fs-5 text-secondary"},ns={key:1,class:"d-flex flex-column border-bottom border-info py-3 align-content-start"},ds={class:"mb-2 fs-5 fw-bolder text-secondary"},rs={class:"fs-5 text-secondary"},cs={class:"d-flex flex-column align-content-start py-3 border-bottom border-info"},ls={class:"mb-2 fs-5 text-secondary fw-bolder"},_s={class:"fs-5 text-secondary"},ms={class:"d-flex flex-column align-content-start py-3 border-bottom border-info"},us={class:"mb-2 text-secondary fw-bolder fs-5"},hs={class:"fs-5 text-secondary"},fs={class:"d-flex flex-column align-content-start py-3 border-bottom border-info"},vs={class:"mb-2 fs-5 fw-bolder text-secondary"},ps={class:"fs-5 text-secondary"},bs={class:"d-flex flex-column align-content-start py-3 border-bottom border-info"},gs={class:"mb-2 fs-5 fw-bolder text-secondary"},ys={class:"fs-5 text-secondary"},$s={class:"d-flex flex-column py-3 border-bottom border-info align-content-start"},ws={class:"mb-2 text-secondary fs-5 fw-bolder"},ks=["src"],Ss={key:1,class:"fs-5 text-secondary"},Cs={key:2},Bs={class:"d-flex flex-column align-content-start border-bottom border-info py-2"},Ms={class:"mb-2 text-secondary fs-5 fw-bolder text-capitalize"},Rs={class:"d-flex align-items-center gap-2 mb-2"},As={class:"fs-5 text-secondary"},js={class:"fs-5"},Vs={class:"modal-dialog"},Fs={class:"modal-content"},Us={class:"modal-header"},Ls={class:"modal-title",id:"ratingModelLabel"},Ds=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),zs={class:"modal-body"},Es={for:"rating"},Ns={class:"rating text-center fs-3 text-warning"},Is={class:"form-group"},Ts={for:"comment"},qs={key:0},Hs={class:"modal-footer"},Ps={type:"button",class:"btn btn-secondary",id:"close","data-bs-dismiss":"modal"};function Ks(e,o,f,g,y,$){const d=l("breadcrums"),u=l("chat-component"),_=l("star-rating"),h=l("Modal");return a(),i("div",null,[s("div",we,[s("div",ke,[s("div",Se,[s("h2",Ce,[s("span",Be,t(e.__("Hello"))+" "+t(e.$page.props.auth.user.name)+" | ",1),s("span",Me,t(e.__("service detail")),1)])]),c(d,{breadcrums:e.breadcrums},null,8,["breadcrums"])])]),s("div",Re,[s("div",Ae,[s("div",je,[e.service.service_status_code==1?(a(),i("div",Ve,[s("div",Fe,[s("p",Ue,t(e.__("Please accept the service from student")),1)]),s("div",Le,[s("button",{type:"updatenStatus",onClick:o[0]||(o[0]=r=>e.updateServiceStatus(2)),class:"btn btn-primary me-lg-3 me-0 px-5"},t(e.__("accept")),1),s("button",{type:"button",onClick:o[1]||(o[1]=r=>e.updateServiceStatus(3)),class:"btn btn-danger px-5"},t(e.__("reject")),1)])])):n("",!0),e.service.service_status_code==5?(a(),i("div",De,[s("div",ze,[s("p",Ee,t(e.__("Service has been completed")),1)])])):n("",!0),e.service.service_status_code==2?(a(),i("div",Ne,[c(u,{onShowCompletedButton:o[2]||(o[2]=()=>this.showMarkedAsCompletedButton=!0),service:e.service},null,8,["service"])])):n("",!0),e.showMarkedAsCompletedButton?(a(),i("div",Ie,[s("div",Te,[e.service.service_status_code==2?(a(),i("div",qe,[s("button",{type:"updatenStatus",onClick:o[3]||(o[3]=r=>e.updateServiceStatus(5)),class:"btn btn-primary px-5"},t(e.__("mark as complete")),1)])):n("",!0)])])):n("",!0),s("div",He,[e.service.service_status_code==5&&e.userRating?(a(),i("div",Pe,[s("div",Ke,[s("div",Oe,[s("div",null,[s("h5",Ge,t(e.__("your feedback")),1),s("b",null,t(e.__("rating"))+": ",1),c(_,{rating:e.userRating.rating,"star-size":20,"read-only":!0,increment:.01,"show-rating":!1},null,8,["rating","increment"]),s("b",null,t(e.__("comment"))+": ",1),m(" "+t(e.userRating.comment),1)])])])])):n("",!0)])]),s("div",Je,[Qe,s("div",We,[s("div",Xe,[s("div",Ye,[s("div",Ze,[s("h4",xe,t(e.__("your service summary")),1),s("h4",{class:"badge",style:V({backgroundColor:e.getBadgeBackgroundColor(e.service.service_status_name)})},t(e.__(e.service.service_status_name)),5)]),s("div",es,[s("h6",ss,t(e.__("booking date")),1),s("span",ts,t(e.service.date),1)]),e.service.teacher_name?(a(),i("div",os,[s("h5",as,t(e.__("selected tutor")),1),s("span",is,t(e.service.teacher_name),1)])):n("",!0),e.service.academy_name?(a(),i("div",ns,[s("h5",ds,t(e.__("academy")),1),s("span",rs,t(e.service.academy_name),1)])):n("",!0),s("div",cs,[s("h5",ls,t(e.__("Service status")),1),s("span",_s,t(e.service.service_status_name),1)]),s("div",ms,[s("h5",us,t(e.__("payment status")),1),s("span",hs,t(e.service.is_paid?e.__("paid"):e.__("Unpaid")),1)]),s("div",fs,[s("h5",vs,t(e.__("fee")),1),s("span",ps,t(e.getDisplayAmount(e.service.price)),1)]),s("div",bs,[s("h5",gs,t(e.__("question")),1),s("span",ys,t(e.service.question),1)]),s("div",$s,[s("h5",ws,t(e.__("attachment")),1),e.service.attachment_url?(a(),i("img",{key:0,src:e.service.attachment_url,height:"100",width:"100",alt:""},null,8,ks)):(a(),i("span",Ss,t(e.__("N/A")),1))]),e.service.service_status_code==5&&e.userRating?(a(),i("div",Cs,[s("div",Bs,[s("h5",Ms,t(e.__("your feedback")),1),s("div",Rs,[s("b",As,t(e.__("rating"))+": ",1),c(_,{rating:e.userRating.rating,"star-size":20,"read-only":!0,increment:.01,"show-rating":!1,class:"mb-1"},null,8,["rating","increment"])]),s("b",js,t(e.__("comment"))+": ",1),m(" "+t(e.userRating.comment),1)])])):n("",!0)])])])]),c(h,{class:"modal fade",id:"ratingModel",tabindex:"-1","aria-labelledby":"ratingModelLabel","aria-hidden":"true"},{default:R(()=>[s("div",Vs,[s("div",Fs,[s("div",Us,[s("h5",Ls,t(e.__("rate now")),1),Ds]),s("div",zs,[s("label",Es,t(e.__("rating"))+":",1),s("div",Ns,[c(_,{modelValue:e.form.rating,"onUpdate:modelValue":o[4]||(o[4]=r=>e.form.rating=r),"onUpdate:rating":e.setRating,"star-size":25},null,8,["modelValue","onUpdate:rating"])]),s("div",Is,[s("label",Ts,t(e.__("comment"))+":",1),B(s("textarea",{"onUpdate:modelValue":o[5]||(o[5]=r=>e.form.comment=r),class:"form-control",id:"",cols:"30",rows:"3"},null,512),[[M,e.form.comment]]),e.form.errors.comment?(a(),i("span",qs,t(e.form.errors.comment),1)):n("",!0)])]),s("div",Hs,[s("button",Ps,t(e.__("close")),1),s("button",{type:"button",onClick:o[6]||(o[6]=(...r)=>e.submit&&e.submit(...r)),class:"btn btn-primary"},t(e.__("submit")),1)])])])]),_:1})])])])}const Os=b($e,[["render",Ks]]),Gs=p({components:{Head:S,AppLayout:k,ChatComponent:U,ValidationErrors:A,Link:C,Breadcrums:F},props:["service"],computed:{userRating(){var e=this.service.reviews&&this.service.reviews.find(o=>o.academy_id==this.$page.props.auth.user[this.$page.props.auth.logged_in_as].id);return e}},data(){return{serviceStatusForm:this.$inertia.form({service_id:this.service.id,status_code:""}),form:this.$inertia.form({comment:"",rating:0,teacher_id:this.service.teacher_id,booked_service_id:this.service.id}),showMarkedAsCompletedButton:!1,breadcrums:[{id:1,name:"Home",link:"/"},{id:2,name:"My Services",link:"/service_log"},{id:3,name:"Service Detail",link:""}]}},async created(){this.showMarkedAsCompletedButton=!0},methods:{getBadgeBackgroundColor(e){switch(e){case"Pending":return"#ffc107";case"Accepted":return"#28a745";case"Rejected":return"#dc3545";case"Cancelled":return"#6c757d";case"Completed":return"#007bff";default:return""}},close(){document.getElementById("close").click()},resetForm(){this.form=this.$inertia.form({comment:"",rating:0})},setRating(e){this.form.rating=e},updateServiceStatus(e){this.serviceStatusForm.status_code=e,this.serviceStatusForm.transform(o=>({...o})).post(this.route("academy.service_detail.updateStatus"),{onSuccess:()=>{e==5&&document.getElementById("rate_now_button").click()}})},submit(){this.form.post(this.route("add_service_rating"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{const e=document.querySelector(".modal-backdrop");e&&e.classList.remove("modal-backdrop"),this.resetForm()}})}}}),Js={class:"container-fluid py-5"},Qs={class:"row"},Ws={class:"col-12"},Xs={class:"fs-2 text-center"},Ys={class:"fw-normal"},Zs={class:"fw-bold"},xs={class:"section py-5"},et={class:"container"},st={class:"px-4 bg-warning rounded-4 mb-3 mb-0 rounded py-3"},tt={key:0,class:"row align-items-center"},ot={class:"col-md-6"},at={class:"mb-0"},it={class:"col-md-6 d-flex justify-content-end flex-wrap"},nt={key:1,class:"row"},dt={class:"col-md-6"},rt={class:"mb-0"},ct={key:2},lt={key:3,class:"row justify-content-end"},_t={class:"col-md-6 d-flex justify-content-end flex-wrap"},mt={key:0,class:"mt-4"},ut={class:"mb-0 rounded",style:{"background-color":"#fff3db"}},ht={key:0},ft={class:"col-md-4 d-flex"},vt={class:"d-flex align-items-center mb-3"},pt={class:"mb-0 text-capitalize"},bt={class:"row"},gt=s("div",{class:"col-md-7"},null,-1),yt={class:"col-lg-5"},$t={class:"card px-2 pb-4 d-flex flex-column mt-3 mt-md-0"},wt={class:"card-body"},kt={class:"d-flex border-bottom border-info py-3 align-items-center justify-content-between"},St={class:"text-primary fw-bolder fs-4"},Ct={class:"d-flex border-bottom border-info py-3 flex-column align-content-start"},Bt={class:"fs-5 mb-2 fw-bolder text-secondary"},Mt={class:"fs-5 text-secondary"},Rt={key:0,class:"d-flex flex-column border-bottom border-info py-3 align-content-start"},At={class:"fs-5 text-secondary mb-2 fw-bolder"},jt={class:"fs-5 text-secondary"},Vt={key:1,class:"d-flex flex-column border-bottom border-info py-3 align-content-start"},Ft={class:"mb-2 fs-5 fw-bolder text-secondary"},Ut={class:"fs-5 text-secondary"},Lt={class:"d-flex flex-column align-content-start py-3 border-bottom border-info"},Dt={class:"mb-2 fs-5 text-secondary fw-bolder"},zt={class:"fs-5 text-secondary"},Et={class:"d-flex flex-column align-content-start py-3 border-bottom border-info"},Nt={class:"mb-2 text-secondary fw-bolder fs-5"},It={class:"fs-5 text-secondary"},Tt={class:"d-flex flex-column align-content-start py-3 border-bottom border-info"},qt={class:"mb-2 fs-5 fw-bolder text-secondary"},Ht={class:"fs-5 text-secondary"},Pt={class:"d-flex flex-column align-content-start py-3 border-bottom border-info"},Kt={class:"mb-2 fs-5 fw-bolder text-secondary"},Ot={class:"fs-5 text-secondary"},Gt={class:"d-flex flex-column py-3 border-bottom border-info align-content-start"},Jt={class:"mb-2 text-secondary fs-5 fw-bolder"},Qt=["src"],Wt={key:1,class:"fs-5 text-secondary"},Xt={key:2},Yt={class:"d-flex flex-column align-content-start border-bottom border-info py-2"},Zt={class:"mb-2 text-secondary fs-5 fw-bolder text-capitalize"},xt={class:"d-flex align-items-center gap-2 mb-2"},eo={class:"fs-5 text-secondary"},so={class:"fs-5"},to={class:"modal-dialog"},oo={class:"modal-content"},ao={class:"modal-header"},io={class:"modal-title",id:"ratingModelLabel"},no=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),ro={class:"modal-body"},co={for:"rating"},lo={class:"rating text-center fs-3 text-warning"},_o={class:"form-group"},mo={for:"comment"},uo={key:0},ho={class:"modal-footer"},fo={type:"button",class:"btn btn-secondary",id:"close","data-bs-dismiss":"modal"};function vo(e,o,f,g,y,$){const d=l("breadcrums"),u=l("chat-component"),_=l("star-rating"),h=l("Modal");return a(),i(L,null,[s("div",null,[s("div",Js,[s("div",Qs,[s("div",Ws,[s("h2",Xs,[s("span",Ys,t(e.__("Hello"))+" "+t(e.$page.props.auth.user.name)+" | ",1),s("span",Zs,t(e.__("service detail")),1)])]),c(d,{breadcrums:e.breadcrums},null,8,["breadcrums"])])]),s("div",xs,[s("div",et,[s("div",st,[e.service.service_status_code==1?(a(),i("div",tt,[s("div",ot,[s("p",at,t(e.__("Please accept the service from student")),1)]),s("div",it,[s("button",{type:"updatenStatus",onClick:o[0]||(o[0]=r=>e.updateServiceStatus(2)),class:"btn btn-primary me-lg-3 me-0 px-5"},t(e.__("accept")),1),s("button",{type:"button",onClick:o[1]||(o[1]=r=>e.updateServiceStatus(3)),class:"btn btn-danger px-5"},t(e.__("reject")),1)])])):n("",!0),e.service.service_status_code==5?(a(),i("div",nt,[s("div",dt,[s("p",rt,t(e.__("Service has been completed")),1)])])):n("",!0),e.service.service_status_code==2?(a(),i("div",ct,[c(u,{onShowCompletedButton:o[2]||(o[2]=()=>this.showMarkedAsCompletedButton=!0),service:e.service},null,8,["service"])])):n("",!0),e.showMarkedAsCompletedButton?(a(),i("div",lt,[s("div",_t,[e.service.service_status_code==2?(a(),i("div",mt,[s("button",{type:"updatenStatus",onClick:o[3]||(o[3]=r=>e.updateServiceStatus(5)),class:"btn btn-primary px-5"},t(e.__("mark as complete")),1)])):n("",!0)])])):n("",!0),s("div",ut,[e.service.service_status_code==5&&e.userRating?(a(),i("div",ht,[s("div",ft,[s("div",vt,[s("div",null,[s("h5",pt,t(e.__("your feedback")),1),s("b",null,t(e.__("rating"))+": ",1),c(_,{rating:e.userRating.rating,"star-size":20,"read-only":!0,increment:.01,"show-rating":!1},null,8,["rating","increment"]),s("b",null,t(e.__("comment"))+": ",1),m(" "+t(e.userRating.comment),1)])])])])):n("",!0)])]),s("div",bt,[gt,s("div",yt,[s("div",$t,[s("div",wt,[s("div",kt,[s("h4",St,t(e.__("your service summary")),1),s("h4",{class:"badge",style:V({backgroundColor:e.getBadgeBackgroundColor(e.service.service_status_name)})},t(e.__(e.service.service_status_name)),5)]),s("div",Ct,[s("h6",Bt,t(e.__("booking date")),1),s("span",Mt,t(e.service.date),1)]),e.service.student_name?(a(),i("div",Rt,[s("h5",At,t(e.__("Student")),1),s("span",jt,t(e.service.student_name),1)])):n("",!0),e.service.academy_name?(a(),i("div",Vt,[s("h5",Ft,t(e.__("academy")),1),s("span",Ut,t(e.service.academy_name),1)])):n("",!0),s("div",Lt,[s("h5",Dt,t(e.__("Service status")),1),s("span",zt,t(e.service.service_status_name),1)]),s("div",Et,[s("h5",Nt,t(e.__("payment status")),1),s("span",It,t(e.service.is_paid?e.__("paid"):e.__("Unpaid")),1)]),s("div",Tt,[s("h5",qt,t(e.__("fee")),1),s("span",Ht,t(e.getDisplayAmount(e.service.price)),1)]),s("div",Pt,[s("h5",Kt,t(e.__("question")),1),s("span",Ot,t(e.service.question),1)]),s("div",Gt,[s("h5",Jt,t(e.__("attachment")),1),e.service.attachment_url?(a(),i("img",{key:0,src:e.service.attachment_url,height:"100",width:"100",alt:""},null,8,Qt)):(a(),i("span",Wt,t(e.__("N/A")),1))]),e.service.service_status_code==5&&e.userRating?(a(),i("div",Xt,[s("div",Yt,[s("h5",Zt,t(e.__("your feedback")),1),s("div",xt,[s("b",eo,t(e.__("rating"))+": ",1),c(_,{rating:e.userRating.rating,"star-size":20,"read-only":!0,increment:.01,"show-rating":!1,class:"mb-1"},null,8,["rating","increment"])]),s("b",so,t(e.__("comment"))+": ",1),m(" "+t(e.userRating.comment),1)])])):n("",!0)])])])]),c(h,{class:"modal fade",id:"ratingModel",tabindex:"-1","aria-labelledby":"ratingModelLabel","aria-hidden":"true"},{default:R(()=>[s("div",to,[s("div",oo,[s("div",ao,[s("h5",io,t(e.__("rate now")),1),no]),s("div",ro,[s("label",co,t(e.__("rating"))+":",1),s("div",lo,[c(_,{modelValue:e.form.rating,"onUpdate:modelValue":o[4]||(o[4]=r=>e.form.rating=r),"onUpdate:rating":e.setRating,"star-size":25},null,8,["modelValue","onUpdate:rating"])]),s("div",_o,[s("label",mo,t(e.__("comment"))+":",1),B(s("textarea",{"onUpdate:modelValue":o[5]||(o[5]=r=>e.form.comment=r),class:"form-control",id:"",cols:"30",rows:"3"},null,512),[[M,e.form.comment]]),e.form.errors.comment?(a(),i("span",uo,t(e.form.errors.comment),1)):n("",!0)])]),s("div",ho,[s("button",fo,t(e.__("close")),1),s("button",{type:"button",onClick:o[6]||(o[6]=(...r)=>e.submit&&e.submit(...r)),class:"btn btn-primary"},t(e.__("submit")),1)])])])]),_:1})])])]),m(" > ")],64)}const po=b(Gs,[["render",vo]]),bo=p({components:{Head:S,AppLayout:k,ValidationErrors:A,ChatComponent:U,Link:C,Breadcrums:F,Modal:D},props:["service"],data(){return{form:this.$inertia.form({comment:"",rating:0,teacher_id:this.service.teacher_id,booked_service_id:this.service.id}),breadcrums:[{id:1,name:"Home",link:"/"},{id:2,name:"My Services",link:"/service_log"},{id:3,name:"Service Detail",link:""}]}},async created(){},mounted(){},computed:{userRating(){var e=this.service.reviews&&this.service.reviews.find(o=>o.student_id==this.$page.props.auth.user[this.$page.props.auth.logged_in_as].id);return e}},methods:{getBadgeBackgroundColor(e){switch(e){case"Pending":return"#ffc107";case"Accepted":return"#28a745";case"Rejected":return"#dc3545";case"Cancelled":return"#6c757d";case"Completed":return"#007bff";default:return""}},close(){document.getElementById("close").click()},resetForm(){this.form=this.$inertia.form({comment:"",rating:0})},setRating(e){this.form.rating=e},submit(){this.form.post(this.route("add_service_rating"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{const e=document.querySelector(".modal-backdrop");e&&e.classList.remove("modal-backdrop"),this.resetForm()}}),this.close()}}}),go={class:"container-fluid py-5"},yo={class:"row"},$o={class:"col-12"},wo={class:"fs-2 text-center"},ko={class:"fw-normal"},So={class:"fw-bold"},Co={class:"section py-5"},Bo={class:"container"},Mo={class:"px-4 mb-0 rounded py-4"},Ro={class:"row"},Ao={class:"col-12"},jo={class:"col-lg-7"},Vo={class:"row mb-2"},Fo={class:"col-12 text-center"},Uo={key:0},Lo={key:1},Do={key:2},zo={key:0,class:"py-3 col-12 text-center rounded-4",style:{"background-color":"#E7F3FA"}},Eo={class:"fw-bold fs-5"},No={key:1},Io={class:"col-lg-5"},To={class:"card px-2 pb-4 d-flex flex-column mt-3 mt-md-0"},qo={class:"card-body"},Ho={class:"d-flex border-bottom border-info py-3 align-items-center justify-content-between"},Po={class:"text-primary fw-bolder fs-4"},Ko={class:"d-flex border-bottom border-info py-3 flex-column align-content-start"},Oo={class:"fs-5 mb-2 fw-bolder text-secondary"},Go={class:"fs-5 text-secondary"},Jo={key:0,class:"d-flex flex-column border-bottom border-info py-3 align-content-start"},Qo={class:"fs-5 text-secondary mb-2 fw-bolder"},Wo={class:"fs-5 text-secondary"},Xo={key:1,class:"d-flex flex-column border-bottom border-info py-3 align-content-start"},Yo={class:"mb-2 fs-5 fw-bolder text-secondary"},Zo={class:"fs-5 text-secondary"},xo={class:"d-flex flex-column align-content-start py-3 border-bottom border-info"},ea={class:"mb-2 fs-5 text-secondary fw-bolder"},sa={class:"fs-5 text-secondary"},ta={class:"d-flex flex-column align-content-start py-3 border-bottom border-info"},oa={class:"mb-2 text-secondary fw-bolder fs-5"},aa={class:"fs-5 text-secondary"},ia={class:"d-flex flex-column align-content-start py-3 border-bottom border-info"},na={class:"mb-2 fs-5 fw-bolder text-secondary"},da={class:"fs-5 text-secondary"},ra={class:"d-flex flex-column align-content-start py-3 border-bottom border-info"},ca={class:"mb-2 fs-5 fw-bolder text-secondary"},la={class:"fs-5 text-secondary"},_a={class:"d-flex flex-column py-3 border-bottom border-info align-content-start"},ma={class:"mb-2 text-secondary fs-5 fw-bolder"},ua=["src"],ha={key:1,class:"fs-5 text-secondary"},fa={key:2},va={class:"d-flex flex-column align-content-start border-bottom border-info py-2"},pa={class:"mb-2 text-secondary fs-5 fw-bolder text-capitalize"},ba={class:"d-flex align-items-center gap-2 mb-2"},ga={class:"fs-5 text-secondary"},ya={class:"fs-5"},$a={key:0,class:"row mt-5"},wa=s("div",{class:"col-md-6"},null,-1),ka={class:"col-md-6 d-flex justify-content-end"},Sa={type:"updatenStatus",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#ratingModel"},Ca={class:"modal-dialog"},Ba={class:"modal-content"},Ma=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"ratingModelLabel"},"Rate Now"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ra={class:"modal-body"},Aa={for:"rating"},ja={class:"rating text-center fs-3 text-warning"},Va={class:"form-group"},Fa={for:"comment"},Ua={key:0},La={class:"modal-footer"},Da={type:"button",class:"btn btn-secondary",id:"close","data-bs-dismiss":"modal"};function za(e,o,f,g,y,$){const d=l("breadcrums"),u=l("video-call-component"),_=l("audio-call-component"),h=l("chat-component"),r=l("star-rating"),z=l("Modal");return a(),i("div",null,[s("div",go,[s("div",yo,[s("div",$o,[s("h2",wo,[s("span",ko,t(e.__("Hello"))+" "+t(e.$page.props.auth.user.name)+" | ",1),s("span",So,t(e.__("service detail")),1)])]),c(d,{breadcrums:e.breadcrums},null,8,["breadcrums"])])]),s("div",Co,[s("div",Bo,[s("div",Mo,[s("div",Ro,[s("div",Ao,[s("div",jo,[s("div",Vo,[s("div",Fo,[e.service.service_status_code!=5?(a(),i("div",Uo,[c(u,{service:e.service},null,8,["service"])])):n("",!0),e.service.service_status_code!=5?(a(),i("div",Lo,[c(_,{service:e.service},null,8,["service"])])):n("",!0),e.service.service_status_code!=5?(a(),i("div",Do,[e.service.service_status_code==1?(a(),i("div",zo,[s("p",Eo,t(e.__("waiting for service acceptance")),1)])):n("",!0),e.service.service_status_code==2?(a(),i("div",No,[c(h,{service:e.service},null,8,["service"])])):n("",!0)])):n("",!0)])])]),s("div",Io,[s("div",To,[s("div",qo,[s("div",Ho,[s("h4",Po,t(e.__("your service summary")),1),s("h4",{class:"badge",style:V({backgroundColor:e.getBadgeBackgroundColor(e.service.service_status_name)})},t(e.__(e.service.service_status_name)),5)]),s("div",Ko,[s("h6",Oo,t(e.__("booking date")),1),s("span",Go,t(e.service.date),1)]),e.service.teacher_name?(a(),i("div",Jo,[s("h5",Qo,t(e.__("selected tutor")),1),s("span",Wo,t(e.service.teacher_name),1)])):n("",!0),e.service.academy_name?(a(),i("div",Xo,[s("h5",Yo,t(e.__("academy")),1),s("span",Zo,t(e.service.academy_name),1)])):n("",!0),s("div",xo,[s("h5",ea,t(e.__("Service status")),1),s("span",sa,t(e.service.service_status_name),1)]),s("div",ta,[s("h5",oa,t(e.__("payment status")),1),s("span",aa,t(e.service.is_paid?e.__("paid"):e.__("Unpaid")),1)]),s("div",ia,[s("h5",na,t(e.__("fee")),1),s("span",da,t(e.getDisplayAmount(e.service.price)),1)]),s("div",ra,[s("h5",ca,t(e.__("question")),1),s("span",la,t(e.service.question),1)]),s("div",_a,[s("h5",ma,t(e.__("attachment")),1),e.service.attachment_url?(a(),i("img",{key:0,src:e.service.attachment_url,height:"100",width:"100",alt:""},null,8,ua)):(a(),i("span",ha,t(e.__("N/A")),1))]),e.service.service_status_code==5&&e.userRating?(a(),i("div",fa,[s("div",va,[s("h5",pa,t(e.__("your feedback")),1),s("div",ba,[s("b",ga,t(e.__("rating"))+": ",1),c(r,{rating:e.userRating.rating,"star-size":20,"read-only":!0,increment:.01,"show-rating":!1,class:"mb-1"},null,8,["rating","increment"])]),s("b",ya,t(e.__("comment"))+": ",1),m(" "+t(e.userRating.comment),1)])])):n("",!0)])])]),e.service.service_status_code==5&&!e.userRating?(a(),i("div",$a,[wa,s("div",ka,[s("button",Sa,t(e.__("rate now")),1)]),c(z,{class:"modal fade",id:"ratingModel",tabindex:"-1","aria-labelledby":"ratingModelLabel","aria-hidden":"true"},{default:R(()=>[s("div",Ca,[s("div",Ba,[Ma,s("div",Ra,[s("label",Aa,t(e.__("rating"))+":",1),s("div",ja,[c(r,{modelValue:e.form.rating,"onUpdate:modelValue":o[0]||(o[0]=v=>e.form.rating=v),"onUpdate:rating":e.setRating,"star-size":25},null,8,["modelValue","onUpdate:rating"])]),s("div",Va,[s("label",Fa,t(e.__("comment"))+":",1),B(s("textarea",{"onUpdate:modelValue":o[1]||(o[1]=v=>e.form.comment=v),class:"form-control",id:"",cols:"30",rows:"3"},null,512),[[M,e.form.comment]]),e.form.errors.comment?(a(),i("span",Ua,t(e.form.errors.comment),1)):n("",!0)])]),s("div",La,[s("button",Da,t(e.__("close")),1),s("button",{type:"button",onClick:o[2]||(o[2]=(...v)=>e.submit&&e.submit(...v)),class:"btn btn-primary"},t(e.__("submit")),1)])])])]),_:1})])):n("",!0)])])])])])])}const Ea=b(bo,[["render",za]]),Na=p({components:{AppLayout:k,Navbar:E,PageHeader:N,TeacherServiceDetail:Os,StudentServiceDetail:Ea,AcademyServiceDetail:po},props:["service"],created(){}});function Ia(e,o,f,g,y,$){const d=l("teacher-service-detail"),u=l("academy-service-detail"),_=l("student-service-detail"),h=l("app-layout");return a(),w(h,{title:"Service Log Detail"},{default:R(()=>[e.$page.props.auth.logged_in_as=="teacher"?(a(),w(d,{key:0,service:e.service},null,8,["service"])):n("",!0),e.$page.props.auth.logged_in_as=="academy"?(a(),w(u,{key:1,service:e.service},null,8,["service"])):n("",!0),e.$page.props.auth.logged_in_as=="student"?(a(),w(_,{key:2,service:e.service},null,8,["service"])):n("",!0)]),_:1})}const Ga=b(Na,[["render",Ia]]);export{Ga as default};
