import{_ as P,d as D,H as N,L as $,o as n,c as g,w as r,r as c,a as t,t as s,b as l,g as d,f as w,e as u,s as h,v as _,h as m,n as S,F as b}from"./app-532c599c.js";import{A as M}from"./AppLayout-4ad18c55.js";import{T as W}from"./TablePagination-f6ee08dc.js";import{C as B,S as E,P as O,N as F}from"./carousel.es-1c5152e9.js";import{M as L}from"./Modal-ab73aec4.js";const I={created(){},data(){return{filter:{page:1,perPage:10}}},methods:{async onPageChange(e){this.searching=!0,this.filter.page=e.page,await this.getPaginatedData(),this.searching=!1},async onPerPageChange(){this.searching=!0,this.pagination.page=1,await this.getPaginatedData(),this.searching=!1}}},V=D({components:{Head:N,Link:$,AppLayout:M,TablePagination:W,Carousel:B,Slide:E,Modal:L,Pagination:O,Navigation:F},props:["current_balance","transactions","withdrawals","gateways","fund_bank_transfers"],mixins:[I],data(){return{selectedTransaction:{},form:this.$inertia.form({amount:null,gateway:null}),withdraw:this.$inertia.form({amount:null,account_holder:"",account_number:"",bank:"",additional_note:""}),currentTabIndex:0,active_tab:"transaction_tab",settings:{itemsToShow:1,snapAlign:"start",autoplay:!1},breakpoints:{700:{itemsToShow:2,snapAlign:"start"},1024:{itemsToShow:2,snapAlign:"start"},1240:{itemsToShow:4,snapAlign:"start"}},key:1}},created(){parseInt(this.$page.props.settings.enable_wallet_system)||(this.$toast.error("Access Denied"),this.$inertia.visit(route("home")))},methods:{setSelectedTransaction(e){this.selectedTransaction=e},close(){const e=document.getElementById("viewpayment"),o=bootstrap.Modal.getInstance(e);o?o.hide():console.error("Modal instance not found")},AddAmountToWallet(){if(!this.form.amount||this.form.amount<=0){this.$toast.error("Please enter amount greater than 0");return}if(!this.form.gateway){this.$toast.error("Please select a gateway");return}this.form.post(this.route("wallet.addAmount"),{onSuccess:e=>{this.close(),window.location.replace(this.route("user.addFund.confirm",{transaction:e.props.response_data.fund.transaction}))}})},withdrawAmount(){if(!this.withdraw.amount||this.withdraw.amount<=0){this.$toast.error("Please enter amount greater than 0");return}this.withdraw.post(this.route("wallet.withdraw"),{onSuccess:()=>{document.getElementById("withdraw_close").click()}})},onChangeCurrentTab(e){this.currentTabIndex=e},getPaginatedData(){this.$inertia.replace(this.route("wallet"),{data:this.filter})},changeTab(){this.$inertia.replace(this.route("wallet"))},getTransactionDetails(e){return e?e.details:null},renderCarousal(){var e=document.getElementById("walletAddModal");let o=this;e.addEventListener("shown.bs.modal",function(f){o.key++})}},mounted(){this.key++}}),j={class:"section p-0"},U={class:"container"},H={class:"row mx-0 border-bottom border-dark py-4"},R={class:"col-12 text-center py-3"},q={class:"text-primary fw-bolder"},K={class:"row"},z={class:"col-12"},G={class:"row align-items-center justify-content-between"},J={class:"col-lg-6"},Q={class:"row"},X={class:"col-lg-4 mb-2 mb-md-0"},Y=["placeholder"],Z={class:"col-lg-4 mb-2 mb-md-0"},x={class:"bg-white rounded-2 px-4 d-flex shadow-sm align-items-center"},tt=["placeholder"],et=t("i",{class:"bi bi-cash-stack mt-1"},null,-1),st={class:"col-lg-3 mb-2 mb-md-0"},at={class:"btn btn-primary w-100"},ot={class:"col-lg-6 pe-md-0"},nt={class:"text-md-end text-start"},lt=["disabled"],dt=t("i",{class:"bi bi-plus text-white fw-bold"},null,-1),it={class:"container"},rt={class:"row py-md-5"},ct={class:"col-12"},ut={class:"d-flex align-items-center justify-content-end mb-3 mb-md-0"},ht={class:"fw-bold"},_t={class:"fs-2 ms-2 fw-bold text-primary"},mt={class:"d-md-flex align-items-center justify-content-between"},bt={class:"modal-content"},pt={class:"modal-header"},gt=["id"],wt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),yt={class:"modal-body"},ft={class:"row"},vt={class:"form-group mb-4"},kt={class:"px-4"},At=["onClick"],Tt=["src","alt"],Ct={class:""},Pt={class:"modal-footer"},Dt={type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",id:"close"},Nt={class:"modal-content"},$t={class:"modal-header"},St=["id"],Mt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Wt={class:"modal-body"},Bt={class:"form-group mb-4"},Et={for:""},Ot={key:0,class:"text-danger"},Ft={class:"form-group mb-4"},Lt={for:""},It={key:0,class:"text-danger"},Vt={class:"form-group mb-4"},jt={for:""},Ut={key:0,class:"text-danger"},Ht={class:"form-group mb-4"},Rt={for:""},qt={key:0,class:"text-danger"},Kt={class:"form-group"},zt={for:""},Gt={key:0,class:"text-danger"},Jt={class:"modal-footer"},Qt={type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",id:"withdraw_close"},Xt={class:"col-md-12"},Yt={class:"nav nav-pills mb-5",id:"pills-tab",role:"tablist"},Zt={class:"nav-item",role:"presentation"},xt={class:"nav-link active",id:"pills-transactions-tab","data-bs-toggle":"pill","data-bs-target":"#pills-transactions",type:"button",role:"tab","aria-controls":"pills-transactions","aria-selected":"true"},te={key:0,class:"nav-item",role:"presentation"},ee={class:"nav-link",id:"pills-withdraw-tab","data-bs-toggle":"pill","data-bs-target":"#pills-withdraw",type:"button",role:"tab","aria-controls":"pills-withdraw","aria-selected":"false"},se={class:"nav-item",role:"presentation"},ae={class:"nav-link",id:"pills-pending-tab","data-bs-toggle":"pill","data-bs-target":"#pills-pending",type:"button",role:"tab","aria-controls":"pills-pending","aria-selected":"false"},oe={class:"tab-content pb-4",id:"pills-tabContent"},ne={class:"tab-pane fade show active",id:"pills-transactions",role:"tabpanel","aria-labelledby":"pills-transactions-tab",tabindex:"0"},le={class:"col-12 mb-5"},de={class:"wallet-table"},ie={class:"text-primary fw-bold"},re={class:"table-responsive"},ce={class:"table text-center"},ue={class:"bg-primary text-white"},he={class:"table-withdraw"},_e=t("th",null,"SR. #",-1),me={key:0},be={colspan:"5"},pe={class:"tab-pane fade",id:"pills-withdraw",role:"tabpanel","aria-labelledby":"pills-withdraw-tab",tabindex:"0"},ge={class:"col-12 my-5"},we={class:"wallet-table"},ye={class:"text-primary fw-bold"},fe={class:"table-responsive"},ve={class:"table text-center"},ke={class:"bg-primary text-white"},Ae={class:"table-withdraw"},Te=t("th",null,"SR. #",-1),Ce={key:0},Pe={key:0},De={colspan:"8"},Ne={class:"tab-pane fade",id:"pills-pending",role:"tabpanel","aria-labelledby":"pills-pending-tab",tabindex:"0"},$e={class:"text-primary fw-bold mb-3"},Se={key:0,class:"table-responsive"},Me={class:"table text-center"},We={class:"bg-primary text-white"},Be={class:"table-withdraw"},Ee={key:0},Oe={colspan:"6",class:"text-center text-muted fs-2 my-4 fw-bold"},Fe={class:"d-flex align-items-center gap-3"},Le={style:{color:"#ff0000"}},Ie=["onClick"],Ve=t("i",{class:"bi bi-eye fs-3"},null,-1),je=[Ve],Ue={key:1,class:"text-center text-muted fs-2 fw-bold my-4"},He=t("hr",null,null,-1),Re={class:"modal-content add-wallet"},qe={class:"modal-header"},Ke={class:"modal-title",id:"walletAddModalLabel"},ze=t("button",{id:"close-btn",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Ge={class:"modal-body"},Je={class:"row"},Qe={class:"table"},Xe={key:0},Ye=["src"],Ze={class:"modal-footer"},xe={type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",id:"close"};function ts(e,o,f,es,ss,as){const v=c("Slide"),k=c("Navigation"),A=c("Carousel"),p=c("Modal"),y=c("TablePagination"),T=c("app-layout");return n(),g(T,{title:"Wallet"},{default:r(()=>[t("div",j,[t("div",U,[t("div",H,[t("div",R,[t("h2",q,s("My Wallet"),1)]),t("div",K,[t("div",z,[t("div",G,[t("div",J,[t("div",Q,[t("div",X,[t("input",{class:"bg-white w-100 border-0 shadow-sm rounded-2 p-2",type:"date",placeholder:e.__("Search By Date")},null,8,Y)]),t("div",Z,[t("div",x,[t("input",{class:"bg-transparent border-0 w-100 shadow-none",type:"number",placeholder:e.__("Search By Amount"),style:{height:"40px"}},null,8,tt),et])]),t("div",st,[t("button",at,s(e.__("search")),1)])])]),t("div",ot,[t("div",nt,[e.$page.props.auth.logged_in_as=="teacher"||e.$page.props.auth.logged_in_as=="academy"?(n(),l("button",{key:0,class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#withdrawAmountModal",disabled:e.current_balance==0},s(e.__("Withdraw Amount")),9,lt)):d("",!0),e.$page.props.auth.logged_in_as=="student"?(n(),l("button",{key:1,class:"btn btn-primary",onClick:o[0]||(o[0]=(...a)=>e.renderCarousal&&e.renderCarousal(...a)),"data-bs-toggle":"modal","data-bs-target":"#walletAddModal"},[dt,w(" "+s(e.__("Add to wallet")),1)])):d("",!0)])])])])])])]),t("div",it,[t("div",rt,[t("div",ct,[t("div",ut,[t("span",ht,s(e.__("Current Wallet Balance:")),1),t("span",_t,s(e.getDefaultCurrencySymbol())+s(e.current_balance),1)]),t("div",mt,[u(p,{maxWidth:"lg",id:"walletAddModal","aria-labelledby":"walletAddModalLabel"},{default:r(()=>[t("div",bt,[t("div",pt,[t("h5",{class:"modal-title",id:e.walletAddModalLabel},s(e.__("Select Payment Method")),9,gt),wt]),t("div",yt,[t("div",ft,[t("div",vt,[h(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=a=>e.form.amount=a),class:"form-control",onKeypress:o[2]||(o[2]=a=>e.inputNumbersOnly()),placeholder:"Enter Amount"},null,544),[[_,e.form.amount]])]),t("div",kt,[(n(),g(A,{key:e.key,settings:e.settings,breakpoints:e.breakpoints},{addons:r(()=>[u(k)]),default:r(()=>[(n(!0),l(b,null,m(e.gateways,(a,i)=>(n(),g(v,{key:i},{default:r(()=>[t("div",{class:S({"border border-5 border-warning":e.form.gateway==a.code}),onClick:C=>this.form.gateway=a.code},[t("img",{class:"",src:a.image,alt:a.name},null,8,Tt),t("h5",Ct,s(a.name),1)],10,At)]),_:2},1024))),128))]),_:1},8,["settings","breakpoints"]))])])]),t("div",Pt,[t("button",Dt,s(e.__("close")),1),t("button",{type:"button",class:"btn btn-primary",onClick:o[3]||(o[3]=(...a)=>e.AddAmountToWallet&&e.AddAmountToWallet(...a))},s(e.__("submit")),1)])])]),_:1}),u(p,{maxWidth:"lg",id:"withdrawAmountModal","aria-labelledby":"withdrawAmountModalLabel"},{default:r(()=>[t("div",Nt,[t("div",$t,[t("h5",{class:"modal-title",id:e.withdrawAmountModalLabel},s(e.__("Withdraw Amount")),9,St),Mt]),t("div",Wt,[t("div",Bt,[t("label",Et,s(e.__("Amount"))+":",1),h(t("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=a=>e.withdraw.amount=a),class:"form-control",onKeypress:o[5]||(o[5]=a=>e.inputNumbersOnly()),placeholder:"Enter Amount"},null,544),[[_,e.withdraw.amount]]),e.withdraw.errors.amount?(n(),l("span",Ot,s(e.withdraw.errors.amount),1)):d("",!0)]),t("div",Ft,[t("label",Lt,s(e.__("Account Holder Name"))+":",1),h(t("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=a=>e.withdraw.account_holder=a),class:"form-control",placeholder:"Enter Account Holder Name"},null,512),[[_,e.withdraw.account_holder]]),e.withdraw.errors.account_holder?(n(),l("span",It,s(e.withdraw.errors.account_holder),1)):d("",!0)]),t("div",Vt,[t("label",jt,s(e.__("Account Number"))+":",1),h(t("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=a=>e.withdraw.account_number=a),class:"form-control",placeholder:"Enter Account Number"},null,512),[[_,e.withdraw.account_number]]),e.withdraw.errors.account_number?(n(),l("span",Ut,s(e.withdraw.errors.account_number),1)):d("",!0)]),t("div",Ht,[t("label",Rt,s(e.__("Bank Name"))+":",1),h(t("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=a=>e.withdraw.bank=a),class:"form-control",placeholder:"Enter Bank Name"},null,512),[[_,e.withdraw.bank]]),e.withdraw.errors.bank?(n(),l("span",qt,s(e.withdraw.errors.bank),1)):d("",!0)]),t("div",Kt,[t("label",zt,s(e.__("Additional Note"))+":",1),h(t("textarea",{class:"form-control","onUpdate:modelValue":o[9]||(o[9]=a=>e.withdraw.additional_note=a),cols:"30",rows:"10",placeholder:"Enter Additional Notes"},null,512),[[_,e.withdraw.additional_note]]),e.withdraw.errors.additional_note?(n(),l("span",Gt,s(e.withdraw.errors.additional_note),1)):d("",!0)])]),t("div",Jt,[t("button",Qt,s(e.__("close")),1),t("button",{type:"button",class:"btn btn-primary",onClick:o[10]||(o[10]=(...a)=>e.withdrawAmount&&e.withdrawAmount(...a))},s(e.__("submit")),1)])])]),_:1})])]),t("div",Xt,[t("ul",Yt,[t("li",Zt,[t("button",xt,s(e.__("All Transactions")),1)]),e.$page.props.auth.logged_in_as=="teacher"||e.$page.props.auth.logged_in_as=="academy"?(n(),l("li",te,[t("button",ee,s(e.__("Withdraw Request")),1)])):d("",!0),t("li",se,[t("button",ae,s(e.__("Pending Transactions")),1)])]),t("div",oe,[t("div",ne,[t("div",le,[t("div",de,[t("h4",ie,s(e.__("Transactions"))+":",1),t("div",re,[t("table",ce,[t("thead",ue,[t("tr",he,[_e,t("th",null,s(e.__("Amount")),1),t("th",null,s(e.__("Type")),1),t("th",null,s(e.__("Time")),1),t("th",null,s(e.__("Info")),1),t("th",null,s(e.__("Date")),1)])]),t("tbody",null,[(n(!0),l(b,null,m(e.transactions.data,(a,i)=>(n(),l("tr",{key:i},[t("td",null,s(i+1),1),t("td",null,s(e.getDefaultCurrencySymbol())+s(a.amount),1),t("td",null,s(a.type),1),t("td",null,s(e.getFormattedTime(a.created_at)),1),t("td",null,s(e.getTransactionDetails(a.meta)),1),t("td",null,s(e.getFormattedDateOnly(a.created_at)),1)]))),128)),e.transactions.length==0?(n(),l("tr",me,[t("td",be,s(e.__("No data found")),1)])):d("",!0)])]),u(y,{onOnPageChange:e.onPageChange,meta:e.transactions},null,8,["onOnPageChange","meta"])])])])]),t("div",pe,[t("div",ge,[t("div",we,[t("h4",ye,s(e.__("Withdraw Requests"))+":",1),t("div",fe,[t("table",ve,[t("thead",ke,[t("tr",Ae,[Te,t("th",null,s(e.__("Amount")),1),t("th",null,s(e.__("Account Number")),1),t("th",null,s(e.__("Holder Name")),1),t("th",null,s(e.__("Bank Name")),1),t("th",null,s(e.__("Status")),1),t("th",null,s(e.__("Time")),1),t("th",null,s(e.__("Date")),1)])]),t("tbody",null,[(n(!0),l(b,null,m(e.withdrawals.data,(a,i)=>(n(),l("tr",{key:i},[t("td",null,s(i+1),1),t("td",null,s(e.getDefaultCurrencySymbol())+" "+s(a.amount),1),t("td",null,s(a.account_number),1),t("td",null,s(a.account_holder),1),t("td",null,s(a.bank),1),t("td",null,[w(s(a.status.toUpperCase())+" ",1),a.rejected_reason?(n(),l("span",Ce,"("+s(a.rejected_reason)+")",1)):d("",!0)]),t("td",null,s(e.getFormattedTime(a.created_at)),1),t("td",null,s(e.getFormattedDateOnly(a.created_at)),1)]))),128)),e.withdrawals.length==0?(n(),l("tr",Pe,[t("td",De,s(e.__("No data found")),1)])):d("",!0)])]),u(y,{onOnPageChange:e.onPageChange,meta:e.withdrawals},null,8,["onOnPageChange","meta"])])])])]),t("div",Ne,[t("h4",$e,s(e.__("Pending Transactions"))+":",1),e.fund_bank_transfers.length?(n(),l("div",Se,[t("table",Me,[t("thead",We,[t("tr",Be,[t("th",null,s(e.__("Pending Deposit")),1),t("th",null,s(e.__("Date")),1),t("th",null,s(e.__("Details")),1),t("th",null,s(e.__("Time")),1),t("th",null,s(e.__("Amount")),1),t("th",null,s(e.__("Actions")),1)])]),t("tbody",null,[Object.keys(e.fund_bank_transfers).length<0?(n(),l("tr",Ee,[t("td",Oe,s(e.__("No pending transactions")),1)])):d("",!0),(n(!0),l(b,null,m(e.fund_bank_transfers,(a,i)=>(n(),l("tr",{key:i},[t("td",null,[t("div",Fe,s(e.__("Pending Deposit")),1)]),t("td",null,s(e.getFormattedDateOnly(a.created_at)),1),t("td",null,s(e.getTransactionDetails(a.meta)),1),t("td",null,s(e.getFormattedTime(a.created_at)),1),t("td",null,[t("span",Le,s(e.getDefaultCurrencySymbol())+s(a.fund.amount),1)]),t("td",null,[t("button",{type:"button",class:"bg-transparent border-0 shadow-none","data-bs-toggle":"modal","data-bs-target":"#viewpayment",onClick:C=>e.setSelectedTransaction(a)},je,8,Ie)])]))),128))])])])):(n(),l("div",Ue,[He,w(" "+s(e.__("No Pending transactions available")),1)]))])])])])])]),u(p,{maxWidth:"lg",id:"viewpayment","aria-labelledby":"walletAddModalLabel"},{default:r(()=>{var a;return[t("div",Re,[t("div",qe,[t("h5",Ke,s(e.__("Pending Deposit")),1),ze]),t("div",Ge,[t("div",Je,[t("table",Qe,[e.selectedTransaction?(n(),l("tbody",Xe,[t("tr",null,[t("th",null,s(e.__("Date")),1),t("td",null,s(e.getFormattedDateOnly(e.selectedTransaction.created_at)),1)]),t("tr",null,[t("th",null,s(e.__("Time")),1),t("td",null,s(e.getFormattedTime(e.selectedTransaction.created_at)),1)]),t("tr",null,[t("th",null,s(e.__("Amount")),1),t("td",null,s(e.getDefaultCurrencySymbol())+s((a=e.selectedTransaction.fund)==null?void 0:a.amount),1)]),t("tr",null,[t("th",null,s(e.__("Image")),1),t("td",null,[t("img",{height:"350",width:"350",src:e.selectedTransaction.attachment,alt:"Attachment"},null,8,Ye)])])])):d("",!0)])])]),t("div",Ze,[t("button",xe,s(e.__("Close")),1)])])]}),_:1})]),_:1})}const rs=P(V,[["render",ts]]);export{rs as default};
